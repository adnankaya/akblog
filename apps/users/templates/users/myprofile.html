{% load crispy_forms_tags %}
{% load i18n %}
<div class="card p-2 shadow-sm">
    <div class="card-body">
        <form method="POST" enctype="multipart/form-data" class="mb-2 needs-validation" novalidate>
            {% csrf_token %}
            <div class="form-group">
                {{ user_form|crispy }}
                <div class="row">
                    <div class="col">
                        <div class="form-floating my-2">
                            <input name="phone" type="tel" class="form-control" id="idPhone" placeholder="5554443322"
                                value="{{user.profile.phone.national_number}}" required title="Phone Example: 5554443322"
                                maxlength="10" minlength="10" pattern="[1-9]{1}[0-9]{9}">
                            <label class="text-muted" for="idPhone">{{_("Phone is required. Ex: 5554443322")}}</label>
                            <div class="invalid-feedback">
                                {{_("Please enter phone number without starting 0 in the beginning. Example: 5554443322")}}
                            </div>
                        </div>
                        <div class="form-floating">
                            <textarea name="about" class="form-control" placeholder="Tell us about yourself" id="idAbout"
                                style="height: 100px">{{user.profile.about}}</textarea>
                            <label class="text-muted" for="idAbout">{{_("Describe yourself")}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group my-2">
                <div class="d-grid gap-2 col-6 mx-auto">
                    <button class="btn btn-warning" type="submit">{{_('Update Profile')}}</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (() => {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
    })()
</script>